<div class="card">
    <div class="grid field">
        <div class="col-6 mt-2">
            <h5>Daftar Pengguna</h5>
        </div>
        <div class="col-6">
            <div class="field text-right hide-mobile">
                <btn-multi-action [haveDeact]="true" [haveAct]="true" [selected]="selected" (onClick)="aksi($event)" ></btn-multi-action>
                <btn-add (onClick)="onAdd()"></btn-add>
            </div>
            <div class="field text-right hide-desktop">
                <btn-multi-action [haveDeact]="true" [haveAct]="true" [haveAdd]="true" [selected]="selected" (onClick)="aksi($event)" ></btn-multi-action>
            </div>
        </div>
    </div>
    <p-table [value]="list" [(first)]='first' [totalRecords]="count" [lazy]="true" (onLazyLoad)="onTableLazyLoad($event)" dataKey="id" [rows]="10" [loading]="loading" styleClass="p-datatable-gridlines" [paginator]="true" pageLinks="3" responsiveLayout="scroll"
    [(selection)]="selected">
        <ng-template pTemplate="caption">
            <div class="justify-content-between flex-column sm:flex-row">
                <app-search [isFilter]="true" (search)="onSearch($event)"></app-search>
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th style="width: 3em">
                    <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                </th>
                <th style="width: 3rem;">
                    <div class="flex justify-content-between align-items-center">
                        No
                    </div>
                </th>
                <th style="width: 8rem">
                    <div class="flex justify-content-between align-items-center">
                        Nama Pengguna
                    </div>
                </th>
                <th style="width: 8rem">
                    <div class="flex justify-content-between align-items-center">
                        Aplikasi
                    </div>
                </th>
                <th style="width: 8rem">
                    <div class="flex justify-content-between align-items-center">
                        Berlaku Dari
                    </div>
                </th>
                <th style="width: 8rem">
                    <div class="flex justify-content-between align-items-center">
                        Berlaku Sampai
                    </div>
                </th>
                <th style="width: 3rem">
                    <div class="flex justify-content-between align-items-center">
                        Aktif
                    </div>
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-data let-rowIndex="rowIndex">
            <tr [pSelectableRow]="data">
                <td>
                    <p-tableCheckbox [value]="data"></p-tableCheckbox>
                </td>
                <td (click)="onEdit(data)" style="width: 3rem;">
                    {{rowIndex+1}}
                </td>
                <td (click)="onEdit(data)" style="min-width: 12rem;">
                    {{data.username}}
                </td>
                <td (click)="onEdit(data)" style="min-width: 12rem;">
                    {{data.applicationName}}
                </td>
                <td (click)="onEdit(data)" style="min-width: 12rem;">
                    {{data.effBegin |formatDate}}
                </td>
                <td (click)="onEdit(data)" style="min-width: 12rem;">
                    {{data.effEnd |formatDate}}
                </td>
                <td class="text-center">
                    <i class="pi"
                        [ngClass]="{'true-icon pi-check-circle text-green-500': data.activeAccount, 'false-icon pi-times-circle text-pink-500 ': !data.activeAccount}"></i>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td class="text-center" colspan="7">No data found.</td>
            </tr>
        </ng-template>
        <ng-template pTemplate="loadingbody">
            <tr>
                <td class="text-center" colspan="7">Loading data. Please wait.</td>
            </tr>
        </ng-template>
    </p-table>
</div>
